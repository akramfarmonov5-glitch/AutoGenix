Replit AI ga joylashtiriladigan prompt (toâ€˜liq, nusxa koâ€˜chirilsin)
Iltimos, quyidagi talablar asosida toâ€˜liq Git repo yarating (Next.js + Node.js, TypeScript). Loyihaning nomi: AutoGenix AI. Domen: autogenix.uz. Loyihaning vazifasi: sayt (Bosh sahifa, Xizmatlar, Blog, Portfolio, Bogâ€˜lanish), avtomatik AI-based post generator (15 sayt post/kun: soat 07:00â€“21:00 har soatda 1 ta; 5 ta Telegram post/kun: marketing soatlari 09:00, 12:00, 15:00, 18:00, 20:00), rasm generatsiyasi har bir post uchun Gemini 2.5 Flash Image, matn generatsiyasi Gemini 1.5 Flash.

**Texnik stack:**
- Frontend: Next.js (App Router yoki Pages ok), TypeScript, TailwindCSS, React.
- Backend: Next API routes yoki kichik Express mikroxizmat (TypeScript).
- DB: Prisma (dev: SQLite), production: Postgres (Render). Model: Post, Image, User(Admin), JobLog.
- Storage: Local / S3 (abstracted adapter). Rasm/favicons PNG va SVG.
- Telegram: Telegraf (bot sending to channel).
- Scheduler: node-cron worker process (ya da Render cron job support).
- Testing: Jest (yagona test misoli).
- Lint & Prettier.

**Talab qilingan deliverables (har biri avtomatik yaratilgan va ishga tushadigan):**
1. `README.md` â€” oâ€˜rnatish + env oâ€˜zgaruvchilar + deploy to Render qadamlar.
2. Toâ€˜liq Next.js frontend: Bosh sahifa, Xizmatlar, Blog (post list + single post), Portfolio, Bogâ€˜lanish (contact form, Telegram link).
3. Admin panel (shifrlangan Basic Auth yoki token) â€” posts roâ€˜yxati, draftlarni koâ€˜rish, postni tahrirlash va qoâ€˜l bilan eâ€™lon qilish, regenerate tugmasi.
4. API routes:
   - `POST /api/generate/post` â€” bir marta post generatsiya qiladi (text + image) va DB ga saqlaydi (status=draft/published).
   - `GET /api/posts` â€” public posts.
   - `GET /api/admin/posts` â€” admin-only.
   - `POST /api/webhook/telegram` â€” (agar kerak) Telegram webhook.
5. Worker: `worker/scheduler.ts` â€” cron jadvalini oâ€˜rnatib, har soat soat boshida 07:00â€“21:00 oraligâ€˜ida site postlari uchun job yaratadi; Telegram uchun kunlik 5 vaqtda alohida job.
6. Gemini integratsiyasi modul: `lib/gemini.ts` yoki `services/geminiService.ts` â€” textGeneration(prompt, options) va imageGeneration(prompt, options) funktsiyalari. Ishlash uchun HTTP `fetch` yoki `axios` bilan yozilsin. Token limit va temperature sozlanadi. Javobni JSON parsela qoâ€˜ying.
7. Image storage adapter: `lib/storage.ts` â€” local dev + S3/GCS prod toggllash. Fayllar `public/uploads/` (dev) va `s3://autogenix-uploads/` (prod).
8. Telegram service: `services/telegram.ts` â€” sendToChannel(text, imageUrl) funksiyasi.
9. Moderatsiya: har generatsiyadan keyin oddiy filter (profanity/blacklist) va `needs_review` flag qoâ€˜yilsin.
10. Cost-control: har image create oldin rasm narxi taxminini hisoblovchi limit (env bilan boshqariladigan max_images_per_day), va agar limit oshsa â€” job`ni `queued` holatida qoldirish.
11. Favicon/app icons: avvalgi yuborgan PNG fayllardan 16x16, 32x32, 180x180, 512x512 variantlarini yaratish skripti.
12. `render.yaml` yoki `Dockerfile` + `render`-config boâ€˜lsin (web + worker + cron/yoki background worker instructions). Yoki kamida bitta `Procfile` va deploy skript.

**Repo strukturasi (taklif):**


/ (root)
â”œâ”€ README.md
â”œâ”€ package.json
â”œâ”€ tsconfig.json
â”œâ”€ next.config.js
â”œâ”€ postcss.config.js
â”œâ”€ tailwind.config.js
â”œâ”€ prisma/
â”‚ â””â”€ schema.prisma
â”œâ”€ src/
â”‚ â”œâ”€ app/ (Next.js pages or app router)
â”‚ â”œâ”€ components/
â”‚ â”œâ”€ lib/
â”‚ â”‚ â”œâ”€ gemini.ts
â”‚ â”‚ â”œâ”€ storage.ts
â”‚ â”‚ â””â”€ telegram.ts
â”‚ â”œâ”€ pages/api/
â”‚ â”‚ â”œâ”€ generate/post.ts
â”‚ â”‚ â””â”€ admin/posts.ts
â”‚ â”œâ”€ worker/
â”‚ â”‚ â””â”€ scheduler.ts
â”‚ â””â”€ styles/
â”œâ”€ public/
â”‚ â””â”€ icons/ (favicon, app icons)
â”œâ”€ scripts/
â”‚ â””â”€ make-icons.js
â””â”€ render.yaml


**Prisma model (soddalashtirilgan):**


model Post {
id Int @id @default(autoincrement())
title String
slug String @unique
body String
excerpt String?
metaTitle String?
metaDescription String?
tags String[] @default([])
imageUrl String?
status String @default("draft") // draft | published | queued
createdAt DateTime @default(now())
updatedAt DateTime @updatedAt
}

model Image {
id Int @id @default(autoincrement())
url String
prompt String
createdAt DateTime @default(now())
}

model JobLog {
id Int @id @default(autoincrement())
type String
detail String
status String
createdAt DateTime @default(now())
}


**Environment variables (README da batafsil yozilsin):**

Gemini

GEMINI_API_KEY=...
GEMINI_TEXT_ENDPOINT=https://api.google.com/gemini/1_5/
...
GEMINI_IMAGE_ENDPOINT=https://api.google.com/gemini/2_5_image/
...

Telegram

TELEGRAM_BOT_TOKEN=...
TELEGRAM_CHANNEL_ID=@yourchannel

Database

DATABASE_URL=file:./dev.db (dev)

production: postgres://USER:PASS@HOST:PORT/DB
Storage

STORAGE_PROVIDER=local | s3 | gcs
S3_BUCKET=...
S3_ACCESS_KEY=...
S3_SECRET_KEY=...

App

PORT=3000
ADMIN_TOKEN=some-secret-token
MAX_DAILY_IMAGES=50


**Prompt shablonlari (Gemini 1.5 â€” oâ€˜zbekcha, SEO):**
- Short post (200â€“350 soâ€˜z):


Sarlavha: {topic_keyword}
Talab: 200â€“300 soâ€˜z atrofida, SEO-optimallashtirilgan blog post. Auditoriya: kichik va oâ€˜rta biznes, oâ€˜zbek tilida. Struktur: kirish (1 paragraf), 3 kichik boâ€˜lim (har biri 2-3 jumla), xulosa + 1 CTA (biz bilan bogâ€˜laning). Soâ€˜zlarda muhim keyword: {topic_keyword}. Meta title (max 60 belgida). Meta description (120â€“160 belgida). 5 ta teg (comma-separated).

- OG image prompt (Gemini 2.5 Image, inglizcha):


Create a clean, flat vector OG image for the blog post titled "{title}". Use company colors: #1E40AF (deep blue) and #FACC15 (gold). Include the gear+lightning icon (center-left) and short title text (shorten if needed). Size 1200x630, PNG, transparent background optional.


**Telegram post template (qisqa):**


{title}
{excerpt}
ğŸ‘€ Toâ€˜liq: {post_url}
ğŸ“© Biz bilan bogâ€˜lanish: t.me/YourBot


**Qoâ€˜shimcha funksionallik va xavfsizlik:**
- Hamma API chaqiriqlar server-side boâ€˜lsin (GEMINI_API_KEY clientga chiqmasin).
- Rate limiting: per-key limit; agar Geminiâ€™dan 429 qaytsa â€” exponential backoff.
- Moderatsiya: textni qayta tekshirish (simple regex + human flag).
- Audit logs: JobLog har bir generatsiya uchun.
- Admin authentication: minimal token-based BasicAuth (README da oâ€˜zgartirish mumkin).
- Failover: agar image creation muvaffaqiyatsiz boâ€˜lsa â€” postni `image_failed` flag bilan eâ€™lon qiling yoki fallback image generatsiya.

**Deploy to Render (qadamlar README da):**
1. Renderâ€™da new web service â€” GitHub repo ulab build command: `npm run build` va start: `npm run start`.
2. Worker service: `npm run worker` (background) yoki Render Cron job pointing to a tiny API endpoint `/api/generate/scheduled`.
3. Set env vars in Render dashboard.
4. Point domain autogenix.uz.

**Testing & Local dev:**
- `npm run dev` â€” Next dev.
- `npm run worker:dev` â€” worker in dev (node worker/scheduler.ts).
- Seed script: create sample posts + admin user.
- Unit test: jest test for gemini service mocking responses.

**Quality & Delivery notes for Replit AI:**
- Kod TypeScript bilan yozilsin va ESLint/Prettier qoâ€˜yilsin.
- Komponentlar Tailwind bilan responsive va accessible boâ€˜lsin.
- Har qanday â€œsecretâ€ yoki API key real qiymatlar oâ€˜rniga `process.env.*` ishlatilgan boâ€˜lsin.
- README da "how to get Gemini API key" qismi qisman yozilsin (link ham berilsin).
- Repo tayyor boâ€˜lgach: `git init` + initial commit va `main` branch.

**Oxirida menga chiqarish fayllari:**
- `README.md`, `render.yaml`, `package.json`, `prisma/schema.prisma`, `src/*` hammasi.
- PNG favicon va app icon variantlari (16x16, 32x32, 180x180, 512x512) public/icons papkasida.

Iltimos, loyiha toâ€˜liq ishlaydigan MVP holatda yarating â€” bir marta `npm install` va `npm run dev` bilan lokalda ishga tushishi, hamda Render uchun build va start skriptlariga ega boâ€˜lsin. Har bir muhim fayl boshida qisqacha sharh (komment) boâ€˜lsin.

Agar savollar boâ€˜lmasa, shu kodni toâ€˜liq generatsiya qilib bering va menga repo tuzilmasi hamda qayerda test qilish mumkinligi haqida qisqacha koâ€˜rsatma bering.
